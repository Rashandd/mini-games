<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>Mini Games ‚Äî Social Empires</title>
        <link rel="stylesheet" href="/css/modern.css"/>
        <script src="https://unpkg.com/@ruffle-rs/ruffle/ruffle.js"></script>
    </head>
    <body>
        <div class="page-container" style="padding-top: 20px;">
            <!-- Game Header -->
            <div class="game-header">
                <div class="game-header-left">
                    <span style="font-size: 1.5rem; margin-right: 8px;">‚öîÔ∏è</span>
                    <span style="font-weight: 700; font-size: 0.95rem;">Social Empires</span>
                    <span style="font-size: 0.7rem; color: var(--text-muted);">{{ version }}</span>
                </div>
                <div class="game-header-right">
                    <div class="player-badge">
                        üè∞ <strong>{{ save_info.name }}</strong> ¬∑ lvl {{ save_info.level }}
                    </div>
                    <a href="/home" class="btn btn-secondary btn-sm">‚Üê Home</a>
                    <a href="/select" class="btn btn-secondary btn-sm">‚öî Villages</a>
                    <a href="/logout" class="btn btn-secondary btn-sm">Sign Out</a>
                </div>
            </div>

            <!-- Game Nav Bar -->
            <div class="game-nav">
                <span class="game-nav-btn active">‚ñ∂ Play</span>
                <a class="game-nav-btn" href="https://discord.gg/zW5gSbQJBw" target="_blank">
                    Discord
                </a>
                <a class="game-nav-btn" href="https://github.com/AcidCaos/socialemperors#readme" target="_blank">
                    GitHub
                </a>
            </div>

            <!-- Game Container with Ruffle -->
            <div class="game-container">
                <div id="ruffle"></div>
            </div>

            <!-- Footer -->
            <div class="page-footer mt-24">
                <p>Powered by <a href="https://ruffle.rs/" target="_blank">Ruffle</a> Flash Emulator ¬∑ Mini Games Platform</p>
            </div>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                var ruffle = window.RufflePlayer.newest();
                var player = Object.assign(
                    document.getElementById("ruffle").appendChild(ruffle.createPlayer()),
                    {
                        width: 760,
                        height: 625,
                        style: 'width: 760px; height: 625px; display: block;',
                    }
                );
                player.load({
                    url: "/default01.static.socialpointgames.com/static/socialempires/flash/SELoader.swf?swftoload=/default01.static.socialpointgames.com/static/socialempires/flash/{{GAMEVERSION}}",
                    backgroundColor: "#669C2C",
                    allowScriptAccess: false,
                    autoplay: true,
                    parameters: 'spdebug=notnull&brk=0'
                        + '&staticUrl=/default01.static.socialpointgames.com/static/socialempires/&brk=0'
                        + '&dynamicUrl=/dynamic.flash1.dev.socialpoint.es/appsfb/socialempiresdev/srvempires/&brk=0'
                        + '&skiphash12341=notnull&brk=0'
                        + '&fb_sig_user={{save_info.userid}}&brk=0'
                        + '&user_key=123456789&brk=0'
                        + '&language=en&brk=0'
                        + '&accessToken=AAABbZAm0wdMUBALsOrR0Ho68CLjaOT8SV3vftKg9mbo1zZColaW5FljRVaLxPGxXXnm1M98mTZCAttcQ4GHwvSyXfsyxYmvKMH8Hmn5iliSPnjvIsZA6&brk=0'
                        + '&sex=m&brk=0'
                        + '&lastLoggedIn=1349266517&brk=0'
                        + '&dailyBonus=0&brk=0'
                        + '&friendsInfo={{friendsInfo | tojson}}&brk=0'
                        + '&serverTime={{serverTime}}&brk=0'
                        + '&forceSyncError=1&brk=0'
                        + '&forceAttackReload=0&brk=0'
                        + '&forceQuestReload=0&brk=0'
                });
            });
        </script>
    </body>
</html>